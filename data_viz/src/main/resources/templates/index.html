<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <!-- import CSS -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/css/bootstrap.min.css">

</head>
<body>
<div id="app">
    <el-container>
        <el-header height = "150px">
            <nav class="navbar navbar-expand-sm bg-dark navbar-dark fixed-top">
                <a class="navbar-brand" href="#">Dash_Table</a>
                <ul class="navbar-nav">
                    <li class="nav-item">
                        <a class="navbar-brand" href="#">Charts</a>
                    </li>
                    <li class="nav-item">
                        <div class="dropdown">
                            <a class="navbar-brand dropdown-toggle" href="#" data-toggle="dropdown">Charts</a>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="#">Link 1</a>
                                <a class="dropdown-item" href="#">Link 2</a>
                                <a class="dropdown-item" href="#">Link 3</a>
                            </div>
                        </div>
                    </li>
                </ul>
            </nav>
        </el-header>
        <el-main height = "750px">
            <template>
                <el-table
                        @sort-change='sortChange'
                        :data="tableData"
                        height="750"
                        border
                        style="width: 100%">
                    <el-table-column
                            prop="iso_code"
                            label="iso_code"
                            width="180">
                    </el-table-column>
                    <el-table-column
                            prop="country"
                            label="国家"
                            width="180">
                    </el-table-column>
                    <el-table-column
                            prop="date"
                            label="日期"
                            width="180">
                    </el-table-column>
                    <el-table-column
                            sortable='custom'
                            prop="new_cases"
                            label="新增人数">
                    </el-table-column>
                    <el-table-column
                            prop="new_deaths"
                            label="新增死亡人数">
                    </el-table-column>
                    <el-table-column
                            prop="total_cases"
                            label="总确诊人数">
                    </el-table-column>
                    <el-table-column
                            prop="total_deaths"
                            label="总死亡人数">
                    </el-table-column>
                </el-table>
            </template>
            <el-pagination
                    background
                    layout="prev, pager, next, jumper"
                    @current-change="getCurrentPage"
                    :current-page="currentPage"
                    :page-size="pageSize"
                    :total="total">
            </el-pagination>
        </el-main>
        <el-footer height = "150px"></el-footer>
    </el-container>

</div>
</body>
<!-- import Vue before Element -->
<script src="https://unpkg.com/vue/dist/vue.js"></script>

<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<!-- import JavaScript -->
<script src="https://unpkg.com/element-ui/lib/index.js"></script>
<script src="https://cdn.staticfile.org/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdn.staticfile.org/popper.js/1.15.0/umd/popper.min.js"></script>
<script src="https://cdn.staticfile.org/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script>
    new Vue({
      el: '#app',
      data() {
      return {
         activeIndex: '1',
        activeIndex2: '1',
        tableData: [],
        currentPage: 0,
        pageSize: 20,
        total:20,

        }
      },
    mounted: function() {
      this.loadStudents()
    },

    methods: {
      sortChange(column) {
        console.log(column.prop)
        console.log(column.order)
        var _this = this
        axios.get('/sort', {
        params: {
           order: column.order,
           prop: column.prop
           }
        }).then(resp => {
        console.log(resp.data)
            _this.tableData = resp.data.data
        })

      },
      getPageSize(){
           var _this = this
           axios.get("/pageSize").then(resp => {
           _this.total = resp.data
           console.log(resp.data)
        })
      },
      loadStudents() {
        var _this = this
        axios.get("/inde").then(resp => {
            _this.tableData = resp.data.data
            _this.getPageSize()
        })
      },
      getCurrentPage(val) {
          var _this = this
          axios.get('/page', {
       params: {
           ID: val}
        }).then(resp => {
        console.log(resp.data)
            _this.tableData = resp.data.data
        })
      },
      handleSelect(key, keyPath) {
          console.log(key, keyPath);
      }
    }
   })

  </script>


</html>